<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="åŒ…å«qwEditorï¼ŒwangEditorï¼ŒUeditorå’ŒTinyMCEå››ç§æœ€å¸¸ç”¨çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¯è‡ªç”±é€‰æ‹©ä½¿ç”¨">
    <title>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆRich Text Editorï¼‰</title>
      <link rel="icon" href="../logo.ico">
      <script src="huisi.element.0.2.js"></script>
      <link rel="stylesheet" href="qwstyle.css" >
      <style>
.panel-heading {padding: .625rem 1rem;border-bottom: 1px solid #ddd;border-top-left-radius: 3px;border-top-right-radius: 3px;background-color: #f5f5f5}
.panel-body { padding: 1rem;width: 97%;box-shadow: 0 0 10px 0px #eee;display: none;}
    select#inputType {padding: 5px 8px;border: 1px solid #ccc;color: #696969;margin: 5px;}
.L1, .L2{width: 560px;}
      </style>
</head>
<body>
    <h1></h1>
  <div class="container panel">
      <div class="panel-heading"><h2>æ¸…æ–‡ç¼–è¾‘å™¨ï¼ˆqwEditorï¼‰</h2>
      <span class="updateInfo">æ¸…æ–‡ç¼–è¾‘å™¨ï¼ˆqwEditorï¼‰
æ˜¯ä¸€æ¬¾ç®€æ˜“ä½†åŠŸèƒ½é½å…¨çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæä¾›äº†æœ€å¸¸è§çš„45ä¸ªæ ‡ç­¾ï¼Œåªè¦é€‰ä¸­å†…å®¹ï¼Œç„¶åç‚¹å‡»æ ‡ç­¾å³å¯ä½¿ç”¨ã€‚</span>
      </div>
      <div class="panel-body">
          <div class="L1">
              <div class="border box" id="displayBox"></div><br>
              <h3 class="center">å­—ç¬¦æ“ä½œ</h3>
              <div><span>å­—ç¬¦ç»Ÿè®¡ï¼š</span><span id="stringTotal"></span></div>
              <div><span>å­—ç¬¦æ›¿æ¢ï¼š</span><span id="stringReplace"></span></div>
          </div>
          <div class="L2">
        <div id="inputBox"><textarea id="content" cols="50" rows="5"></textarea></div>
        <h3 class="center">æ·»åŠ HTMLæ ‡ç­¾æˆ–è€…æ–‡æœ¬</h3>
<div><span>æ ·å¼ï¼š</span><span id="style"></span></div>
<div><span>å­—æ¯æ ·å¼ï¼š</span><span id="alphabetStyle"></span></div>
<div><span>å¸ƒå±€ï¼š</span><span id="layout"></span></div>
<div><span>ç‰©ä»¶ï¼š</span><span id="widget"><input type="button" id="A" value="A" title="é“¾æ¥"><input type="button" id="Img" value="Img" title="å›¾ç‰‡"><input type="button" id="Iframe" value="Iframe" title="æ¡†æ¶"><input type="button" id="Progress" value="Progress" title="è¿›åº¦æ¡"><input type="button" id="Meter" value="Meter" title="è®¡é‡å™¨"></span></div>
<div><span>è¡¨å•ï¼š</span><select id="inputType"><option value="">è¯·é€‰æ‹©</option></select></div>
<div><span>æ ‡é¢˜ï¼š</span><span id="heading"></span></div>
<div><span>å…¶ä»–ï¼š</span><input type="button" id="empty" value="ğŸ¤”æ¸…ç©º"><input type="button" onclick="copy()" value="ğŸ˜‚å…¨é€‰ä¸å¤åˆ¶" ></div>
          
          </div>
          <div class="clear"> </div>	

      </div>
  </div>  
 
 <script>
 var selectionStart, selectionEnd;
 let box=SE("#displayBox");
 var textarea=SE("#content");
 D.onkeyup = D.onmouseup = function() {
     var userSelection = (W.getSelection) ? W.getSelection() : (D.selection) ? D.selection.createRange() : null;
     if (userSelection) { selectionStart = textarea.selectionStart;  selectionEnd = textarea.selectionEnd; }
 };
     
     function HtmlTag(a,b,c){ a.onclick=function(){
        textarea.value = textarea.value.substring(0, selectionStart)
            + b + textarea.value.substring(selectionStart, selectionEnd)
            + c + textarea.value.substring(selectionEnd);
        oE(box,textarea.value);
    }}

var dataList={
    "Tag0":{ 
         'Bold':'b>','Italic':'i>','Small':'small>','Underline':'u>', 'Strong':'strong>',
         'Button':'button>','Mark':'mark>','P':'p>', 'Sub':'sub>', 'Sup':'sup>','Pre':'pre>',
         'Del':'del>','Ins':'ins>','Q':'q>','Code':'code>'},
    "Tag1":{
        'Br':['','<br>'],'Hr':['','<hr>'],
        'Ul':['<ul><li>æ…§æ€','å¤©ç©º</li></ul>'],'Ol':['<ol><li>æ…§æ€','å¤©ç©º</li></ol>'],
        'List':['<li>','</li>\n'],
        'Table':['','<table><thead><tr><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table>'],
        'Col':['<tr><td>',"</td></tr>\n"],'Row':['<td>',"</td>\n"]},
     "Tag2":{
'Div':'div>','Span':'span>','Header':'header>','Main':'main>','Footer':'footer>','Aside':'aside>', 'Nav':'nav>',
'Section':'section>','Article':'article>','Address':'address>','Time':'time>'},
"Tag3":{ 'Fisrtcapitalize':"","Capitalize":"","lowerCase":"","clearAlphabetStyle":""},
"Form":["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],
"totalList":{'TotalA':'æ€»å­—ç¬¦','TotalB':'ä¸­æ–‡å­—ç¬¦','TotalC':'è‹±æ–‡å­—ç¬¦','TotalD':'è‹±æ–‡å•è¯','TotalE':'æ•°å­—','TotalTime':'å­—ç¬¦å‡ºç°æ¬¡æ•°(åŒºåˆ†ä¸­è‹±)','TotalTimes':'å­—ç¬¦å‡ºç°æ¬¡æ•°(ä¸åŒºåˆ†)'},
"replaceList":{'StringReplace':'å­—ç¬¦æ›¿æ¢','LengthCut':'é•¿åº¦æˆªå–','customCut':'è‡ªå®šä¹‰æˆªå–'}
     }
     
var DT=dataList;
!(function (a,b,c) {
const numList=["style","widget","layout","alphabetStyle"];

    for(let i=0;i<numList.length;i++){
        const data = DT['Tag'+i];
        for (const key in data) { SE("#"+numList[i]).innerHTML += a + key + b + key+c; }
    }
    for(var k=1;k<7;k++){SE('#heading').innerHTML+=a+'H'+k+ ' value=H'+k+c};
   
    for(var j=1;j<DT.Form.length;j++){SE('#inputType').innerHTML+='<option value="'+DT.Form[j]+'">'+DT.Form[j]+'</option>'}
})('<input type="button" id=',' value=','>');


for(key in DT.Tag0){ HtmlTag( QE.id(key),'<'+DT.Tag0[key],'</'+DT.Tag0[key]);} 
for(key in DT.Tag1){ HtmlTag( QE.id(key),DT.Tag1[key][0],DT.Tag1[key][1]);} 
for(key in DT.Tag2){ HtmlTag( QE.id(key),'<'+DT.Tag2[key],'</'+DT.Tag2[key]);} 
for(var i=1;i<7;i++){ HtmlTag( SE('#H'+i),'<h'+i+'>','<\/h'+i+'>');}

//2024-1-10 æ–°å¢å¼¹çª—å¡«å†™ï¼Œæœ‰å¼¹çª—çš„é¢å¤–å¤„ç†

	function handleClick(inputType, altText,text) {
		    OE.alertBox(SE('#alertInputBox'), "è¾“å…¥éœ€è¦æ’å…¥çš„" + inputType , "è¾“å…¥" + altText + text,SE("#inputBox"));
		
		   SE("#ok1").onclick = function () {
		        let prefix, postfix;
		        let urlValue=SE("#urlInput").value;
		        let textValue=SE('#textInput').value;
		        if (inputType === 'å›¾ç‰‡é“¾æ¥ï¼š') {
		            prefix = `<img src="${urlValue}" alt="${textValue}"`;
		            postfix = '>';
		        } else if (inputType === 'å¼•ç”¨é“¾æ¥ï¼š') {
		            prefix = `<iframe src="${urlValue}" width="98%" height="98%">`;
		            postfix =  textValue +'</iframe>';
		        } else if  (inputType === 'é”šé“¾æ¥ï¼š'){ 
		            prefix = `<a href="${urlValue}">`;
		            postfix =  textValue +'</a>';
		        } else if  (inputType === 'è¿›åº¦æ¡é»˜è®¤æ•°å€¼'){
		            prefix = `<progress value="${urlValue}" max="${textValue}">`;
		            postfix =  Math.floor((urlValue/textValue)*100) +'%</progress>';
		        } else {
		            prefix = '<meter  value="${urlValue}" max="${textValue}">';
		            postfix =  Math.floor((urlValue/textValue)*100) +'%</meter>';
		        }
		
		        textarea.value = textarea.value.substring(0, selectionStart) +
		            prefix + textarea.value.substring(selectionStart, selectionEnd) +
		            postfix + textarea.value.substring(selectionEnd);
		
		       twoBoxVal(),hideE(SE('#alertInputBox')), oE(SE('#alertInputBox'),'');
		    }
		}
		
		const textSuffix=["ï¼Œå¯ä¸å¡«",' (å¿…å¡«)ï¼Œä¸”è¦å¤§äºé»˜è®¤æ•°å€¼'];
		A.onclick =  ()=> { handleClick('é”šé“¾æ¥ï¼š', 'é”šæ–‡æœ¬åå­—',textSuffix[0]); }
		Img.onclick = () => { handleClick('å›¾ç‰‡é“¾æ¥ï¼š', 'ALTå±æ€§å€¼',textSuffix[0]);}
		Iframe.onclick = ()=> { handleClick('å¼•ç”¨é“¾æ¥ï¼š', 'æ ‡è®°æ–‡å­—',textSuffix[0]);}
		Progress.onclick = ()=> { handleClick('è¿›åº¦æ¡é»˜è®¤æ•°å€¼', 'æœ€å¤§æ•°å€¼',textSuffix[1]);}
		Meter.onclick = ()=> { handleClick('é»˜è®¤æ•°å€¼', 'æœ€å¤§æ•°å€¼',textSuffix[1]);}


//é€‰æ‹©ç›¸åº”çš„è¾“å…¥æ¡†ç±»å‹è¾“å‡ºåˆ°é¡µé¢ä¸Š

    inputType.addEventListener("change", function() {
	  CE("input",{attrs:{type:SE("#inputType").value}},Box)
      textarea.value=Box.innerHTML;
    });
    
 !(function () {
        for (const key in DT.totalList) {
            SE("#stringTotal").innerHTML += `<input type="button" id=${key} value=${DT.totalList[key]}>`;
        }
        for (const key in DT.replaceList) {
            SE("#stringReplace").innerHTML += `<input type="button" id=${key} value=${DT.replaceList[key]}>`;
        }
})();   
    

function createClickHandler(type) {
    return function() {
        let regex;
        switch (type) {
            case 'æ€»å­—ç¬¦':
                regex = /[\s\S]/g; // åŒ¹é…ä»»ä½•å­—ç¬¦
                break;
            case 'ä¸­æ–‡å­—ç¬¦':
                regex = /[\u4E00-\u9FA5]/g; // åŒ¹é…ä¸­æ–‡å­—ç¬¦
                break;
            case 'è‹±æ–‡å­—ç¬¦':
                regex = /[a-zA-Z]/g; // åŒ¹é…è‹±æ–‡å­—ç¬¦
                break;
            case 'è‹±æ–‡å•è¯':
                regex = /\b[A-Za-z]+\b/g; // åŒ¹é…è‹±æ–‡å•è¯
                break;
            case 'æ•°å­—':
                regex = /[0-9]/g; // åŒ¹é…æ•°å­—
                break;
            default:
                return;
        }

        let count = (textarea.value.match(regex) || []).length;
        boxValue('<b>' + type.charAt(0).toUpperCase() + type.slice(1) + 'å­—ç¬¦æ•°é‡</b>ï¼ˆä¸å«å…¶ä»–ç±»å‹å­—ç¬¦ï¼‰ï¼š<mark>' + count + '</mark>');
    };
}

let TotalId=[],TotalName=[];
for (value in DT.totalList){ 
    TotalId.push(value)
    TotalName.push(DT.totalList[value])
};

for(var i=0;i<5;i++){ SE("#"+TotalId[i]).onclick=createClickHandler(TotalName[i])}


TotalTime.onclick=()=>{ 
    OE.confirm("è¾“å…¥éœ€è¦åŒ¹é…çš„å­—ç¬¦ï¼š","",true,function (){
    let count = 0;
    let str=textarea.value.trim();
    let subStr=SE("#alertBody").innerHTML.trim();
    
    if(str===''||subStr===''){ OE.alert('å¿˜è®°å¡«å†™å†…å®¹å•¦ãƒ½(^ã€‚^)ãƒ',''); return; }
    
    const regex=/\s/g;
        
        if(regex.test(str)===true){  //åˆ¤æ–­ä¼ å…¥çš„å­—ç¬¦æ˜¯å•è¯ï¼Œè¿˜æ˜¯éå•è¯ï¼Œå¦‚æœæ˜¯å•è¯åˆ™å•ç‹¬è®¡ç®—æ¬¡æ•°

            let subStrs = str.split(' ');
        for (let i = 0; i < subStrs.length; i++) {
          if (subStrs[i] === subStr) {count++;}
          }
            
        }
        
        else{
            let index = str.indexOf(subStr);
        while (index!== -1) {
        count++;
        index = str.indexOf(subStr, index + 1);
    } 
        }
    
    return boxValue(`<div style="overflow:scroll;height:450px;"><b>æ‚¨è¾“å…¥çš„å­—ç¬¦ä¸²ä¸ºï¼š</b>${str}</div><br><b>åŒ¹é…çš„å­—ç¬¦ä¸ºï¼š</b><mark>${subStr}</mark><br><b>å­—ç¬¦å‡ºç°æ¬¡æ•°ï¼š</b><mark>${count}</mark>`)
    }
)};


TotalTimes.onclick=()=>{ 
    OE.confirm("è¾“å…¥éœ€è¦åŒ¹é…çš„å­—ç¬¦ï¼š","",true,function (){
    let count = 0;
    let str=textarea.value.trim();
    let subStr=SE("#alertBody").innerHTML.trim();
    
    if(str===''||subStr===''){ OE.alert('å¿˜è®°å¡«å†™å†…å®¹å•¦ãƒ½(^ã€‚^)ãƒ',''); return; }
    
    const regex=/\s/gi;
        if(regex.test(str)===true){
             let index = str.indexOf(subStr);
        while (index!== -1) {
        count++;
        index = str.indexOf(subStr, index + 1);
    } 
        }
    return boxValue(`<p><b>æ‚¨è¾“å…¥çš„å­—ç¬¦ä¸²ä¸ºï¼š</b>${subStr}</p><p><b>å­—ç¬¦å‡ºç°æ¬¡æ•°ï¼š</b><mark>${count}</mark></p>`)
    }
)};


///-----


/*å­—ç¬¦æ“ä½œ*/
function Replace(){
	var stringReplace=new RegExp(SE("#urlInput").value,'ig'); //ä¸å»ºç«‹æ­£åˆ™çš„è¯ï¼Œæ— æ³•æ›¿æ¢å¤§å°å†™å’Œç©ºæ ¼
	  
	  updateVal(textarea.value.replaceAll(stringReplace, SE('#textInput').value));
	
	   //ä¸ replace() ä¸åŒï¼ŒreplaceAllå°†æ›¿æ¢æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¬¬ä¸€ä¸ª
	OE.alert("å…±æ›¿æ¢äº†:"+textarea.value.match(new RegExp(SE('#textInput').value, "g")).length+'ä¸ª');
}

StringReplace.onclick=function(){
    OE.alertBox(SE("#alertInputBox"),"æŸ¥æ‰¾æ‚¨æƒ³æ›¿æ¢çš„å†…å®¹","è¾“å…¥æ‚¨æƒ³æ›¿æ¢çš„å†…å®¹ï¼Œå¦‚æŸ¥æ‰¾çš„111æ›¿æ¢æˆ222",Replace);
}



function sliceStringByLength(starLength, endLength) {
  if (textarea.value.length <= endLength) {  return textarea.value; }
  return textarea.value.slice(starLength, endLength);
}


LengthCut.onclick=function(){
	OE.confirm('è¾“å…¥æ‚¨æƒ³æˆªå–çš„é•¿åº¦ï¼Œå¦‚8,20,3','2',true,dd);

	function  dd(){
	      let length=parseInt(SE("#alertBody").innerHTML);
		  if (textarea.value.length<length){
			  OE.alert('é”™è¯¯æç¤ºï¼šå­—ç¬¦ä¸²çš„é•¿åº¦ä¸º'+textarea.value.length+' ï¼Œæˆªå–çš„é•¿åº¦ä¸èƒ½å¤§äºè¯¥é•¿åº¦','');
	      }
	      
	      else{  boxValue(sliceStringByLength( 0,parseInt(length)));}
	    }; 
	
		
}

function Custom(){
	const num1=parseInt(SE("#urlInput").value);
	    
	if (textarea.value.length<num1) { OE.alert('å­—ç¬¦ä¸²é•¿åº¦ä¸º'+textarea.value.length+',æˆªå–çš„ä½ç½®éœ€å°äºè¯¥é•¿åº¦','')}
	
	else{
	     boxValue(textarea.value.substring(num1,parseInt(SE('#textInput').value)+num1));
	}
}


customCut.onclick=()=>{OE.alertBox(SE("#alertInputBox"),"ä»å“ªé‡Œå¼€å§‹æˆªå–å­—ç¬¦? å¦‚0,3,5","æˆªå–åä¿ç•™å¤šå°‘å­—ç¬¦? å¦‚3,5,8",Custom)}



 !(function (){

var EClick=[empty,Fisrtcapitalize,Capitalize,lowerCase,clearAlphabetStyle];
var alphabetStyle=['text-transform:','capitalize','uppercase','lowercase',''];

for(let i=1;i<4;i++){ 
EClick[i].onclick=() =>{sE(textarea,alphabetStyle[0]+alphabetStyle[i]);sE(Box,alphabetStyle[0]+alphabetStyle[i])};
 }  
 
EClick[4].onclick=function(){  sE(textarea,'');sE(Box,'')} //æ¸…ç©ºæ ·å¼

   })();
   
   
   

SE('#content').onchange=function(){ oE(SE('#displayBox'),SE('#content').value)};
</script>
 
 <!--    åˆ†å‰²çº¿         -->
<script src="qw.js"></script>
</body>
</html>
